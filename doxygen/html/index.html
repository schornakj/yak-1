<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Yak: Yak</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Yak
   </div>
   <div id="projectbrief">Library for TSDF surface reconstruction</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Yak </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://github.com/ros-industrial/yak/actions"><img src="https://github.com/ros-industrial/yak/workflows/CI/badge.svg?branch=devel" alt="GitHub Actions status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/ros-industrial/yak/issues"><img src="https://img.shields.io/github/issues/ros-industrial/yak.svg?" alt="GitHub issues open" style="pointer-events: none;" class="inline"/></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="license - MIT" style="pointer-events: none;" class="inline"/></a> <a href="http://rosindustrial.org/news/2016/10/7/better-supporting-a-growing-ros-industrial-software-platform"><img src="https://img.shields.io/badge/support%20level-consortium%20/%20vendor-brightgreen.svg" alt="support level: consortium / vendor" style="pointer-events: none;" class="inline"/></a></p>
<p>Yak is a library for integrating depth images into Truncated Signed Distance Fields (TSDFs). It is currently supported for Ubuntu 16.04 and Ubuntu 18.04. An example ROS node using Yak is provided in the <a href="https://github.com/ros-industrial/yak_ros">yak_ros</a> repository.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Technical Background</h1>
<p>A TSDF is a probabilistic representation of a solid surface in 3D space. It's a useful tool for combining many noisy incomplete sensor readings into a single smooth and complete model.</p>
<p>To break down the name:</p>
<p>Distance Field: Each voxel in the volume contains a value that represents its metric distance from the closest point on the surface. Voxels very far from the surface have high-magnitude distance values, while those near the surface have values approaching zero.</p>
<p>Signed: Voxels outside the surface have positive distances, while voxels inside the surface have negative distances. This allows the representation of solid objects. The distance field represents a gradient that shifts from positive to negative as it crosses the surface.</p>
<p>Truncated: Voxels further than a specified distance from the isosurface have their values capped at +/- 1 because we are only interested in precisely representing the region of the volume close to solid objects.</p>
<p>The TSDF algorithm can be efficiently parallelized on a general-purpose graphics processor, which allows data from RGB-D cameras to be integrated into the volume in real time. Numerous observations of an object from different perspectives average out noise and errors due to specular highlights and interreflections, producing a smooth continuous surface. This is a key advantage over equivalent point-cloud-centric strategies, which require additional processing to distinguish between engineered features and erroneous artifacts in the scan data. The volume can be converted to a triangular mesh using the Marching Cubes algorithm for consumption by application-specific processes.</p>
<p>Yak is intended as a flexible library that gives the end user (you!) a lot of freedom over when data gets integrated, which poses are used, whether Iterative Closest Point plays a role, etc.</p>
<p><img src="/aluminum_channel_mesh.png" alt="An aluminum part reconstructed as a TSDF and meshed with the Marching Cubes algorithm." class="inline"/></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Dependencies</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
CMake</h2>
<p>Yak requires CMake 3.10.0 or newer in order to take advantage of improved support for CUDA. If you're using Ubuntu 18.04 or newer you should already have a suitable version. If you're using an older distribution (e.g. 16.04) you will need to install a compatible version of CMake yourself.</p>
<ol type="1">
<li>Install pip (if it isn't already installed): <div class="fragment"><div class="line">sudo apt install python-pip</div>
</div><!-- fragment --></li>
<li>Use pip to install CMake locally, which will not overwrite the system installation of CMake. As of September 5 2019 this installs CMake 3.14.4 on Ubuntu 16.04. <div class="fragment"><div class="line">pip install --user cmake --upgrade</div>
</div><!-- fragment --></li>
<li>(Optional, depending on the specifics of your environment) Prepend the directory where CMake was just installed to the PATH environment variable. You may also add this to <code>.bashrc</code>. <div class="fragment"><div class="line">export PATH=:/home/YOUR_USERNAME/.local/bin:$PATH</div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="autotoc_md4"></a>
CUDA</h2>
<p>Yak requires an NVidia GPU and CUDA 9.0 or newer.</p>
<ol type="1">
<li>CUDA depends on Nvidia third-party drivers and will not work with the default Nouveau drivers. Determine which version of the Nvidia driver is compatible with your computer's GPU by running <code>ubuntu-drivers devices</code>. Usually the driver version listed as "third-party free recommended" is suitable. You can install the recommended driver using <code>sudo ubuntu-drivers autoinstall</code>. Example output listed below:</li>
</ol>
<div class="fragment"><div class="line">== /sys/devices/pci0000:00/0000:00:02.0/0000:02:00.0 ==</div>
<div class="line">modalias : pci:v000010DEd000017C8sv00001458sd000036CBbc03sc00i00</div>
<div class="line">vendor   : NVIDIA Corporation</div>
<div class="line">model    : GM200 [GeForce GTX 980 Ti]</div>
<div class="line">driver   : nvidia-driver-418 - third-party free recommended</div>
<div class="line">driver   : nvidia-driver-410 - third-party free</div>
<div class="line">driver   : nvidia-driver-390 - distro non-free</div>
<div class="line">driver   : xserver-xorg-video-nouveau - distro free builtin</div>
</div><!-- fragment --><ol type="1">
<li>Consult the chart below (copied from <a href="https://docs.nvidia.com/deploy/cuda-compatibility/index.html#binary-compatibility__table-toolkit-driver">here</a> as of September 5 2019) to find which CUDA version is compatible with the drivers supported by your GPU. Yak is currently not compatible with CUDA &lt;= 8.0.</li>
</ol>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CUDA Toolkit  </th><th class="markdownTableHeadNone">Linux x86_64 Driver Version   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CUDA 10.1 (10.1.105)  </td><td class="markdownTableBodyNone">&gt;= 418.39   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CUDA 10.0 (10.0.130)  </td><td class="markdownTableBodyNone">&gt;= 410.48   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CUDA 9.2 (9.2.88)  </td><td class="markdownTableBodyNone">&gt;= 396.26   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CUDA 9.1 (9.1.85)  </td><td class="markdownTableBodyNone">&gt;= 390.46   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CUDA 9.0 (9.0.76)  </td><td class="markdownTableBodyNone">&gt;= 384.81   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CUDA 8.0 (8.0.61 GA2)  </td><td class="markdownTableBodyNone">&gt;= 375.26   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CUDA 8.0 (8.0.44)  </td><td class="markdownTableBodyNone">&gt;= 367.48   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CUDA 7.5 (7.5.16)  </td><td class="markdownTableBodyNone">&gt;= 352.31   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CUDA 7.0 (7.0.28)  </td><td class="markdownTableBodyNone">&gt;= 346.46   </td></tr>
</table>
<ol type="1">
<li>Specific installation instructions vary depending on the combination of Ubuntu version, CUDA version, and Nvidia driver version. Please read the linked instructions carefully: they are very important, and CUDA may not work correctly if you skip a step!</li>
</ol>
<ul>
<li>Package manager installation is usually the easiest method, especially if you have Ubuntu 18.04 and a new GPU. <a href="https://developer.nvidia.com/cuda-toolkit-archive">Download a compatible version of CUDA from here</a> (pick "Installer Type: deb (network)") and then <a href="https://docs.nvidia.com/cuda/cuda-quick-start-guide/index.html#ubuntu-x86_64-deb">follow these instructions</a>.</li>
<li>Nvidia doesn't release debians for every combination of Ubuntu release and CUDA version. If the package manager installation method fails to find a compatible .deb (e.g. you have Ubuntu 18.04 but your GPU only supports driver version 384), <a href="https://developer.nvidia.com/cuda-toolkit-archive">download the runfile version of the CUDA installer from here</a> (pick "Installer Type: runfile (local)") and then <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#runfile">follow the runfile installation instructions</a>. Since you have already installed the NVidia driver in step 1 you do not need to reboot your system into non-GUI mode, and when the runfile dialog asks if you would like to install these drivers you may decline.</li>
</ul>
<ol type="1">
<li>Follow the instructions in <a href="https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions">Post-installation Actions</a>. It is not necessary to complete the steps listed under "POWER9 Setup" &ndash; you probably do not have a POWER9-compatible system unless you work with supercomputers.</li>
</ol>
<h2><a class="anchor" id="autotoc_md5"></a>
OpenMP</h2>
<p>Yak requires OpenMP for parallelization of the marching cubes surface reconstruction process. </p><div class="fragment"><div class="line">sudo apt install libomp-dev</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md6"></a>
OpenCV</h2>
<p>Yak requires OpenCV 3.0 or newer. If you are using ROS then this dependency is already satisfied. Otherwise you will need to install it yourself: </p><div class="fragment"><div class="line">sudo apt install libopencv-dev</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md7"></a>
Eigen</h2>
<p>Yak requires Eigen 3. If you are using ROS then this dependency is already satisfied. Otherwise you will need to install it yourself: </p><div class="fragment"><div class="line">sudo apt install libeigen3-dev</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md8"></a>
PCL</h2>
<p>Yak requires PCL 1.8 or newer. If you are using ROS then this dependency is already satisfied. Otherwise you will need to install it yourself: </p><div class="fragment"><div class="line">sudo apt install libpcl-dev</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md9"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md10"></a>
Build with ROS (recommended)</h2>
<p>Installing ROS is beyond the scope of this readme. There are installation instructions <a href="http://wiki.ros.org/melodic/Installation/Ubuntu">here for ROS1</a> and <a href="https://index.ros.org/doc/ros2/Installation/Dashing/Linux-Install-Debians/">here for ROS2</a>.</p>
<p>Clone this package into the <code>src</code> directory of a ROS workspace. For ROS1 use <code>catkin build</code> to build the workspace. For ROS2 use <code>colcon build</code> to build the workspace.</p>
<p>Take a look at the <a href="https://github.com/ros-industrial/yak_ros">yak_ros</a> package for example implementations of ROS nodes using Yak.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Build Standalone (in development)</h2>
<div class="fragment"><div class="line">git clone https://github.com/ros-industrial/yak.git</div>
<div class="line">cd yak</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake ../yak</div>
<div class="line">make</div>
<div class="line">sudo make install</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md12"></a>
Readme TODOs:</h1>
<ul>
<li>Minimally-functional example</li>
<li>Documentation of services, inputs, outputs, etc. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Oct 25 2020 18:25:39 for Yak by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
